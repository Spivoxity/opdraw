% opdraw.tex
% Copyright (c) 2021 J. M. Spivey

\catcode`@=11

\newdimen\minw \minw=30pt

\font\tensc=cmcsci10
\font\ninett=cmtt9
\font\eighttt=cmtt8

% \aftergroup nonsense so text doesn't have to be an argument of \node
\def\node{\setbox0=\hbox\bgroup$\bgroup\aftergroup\nodei\nodestrut\let\next}
\def\nodei{$\egroup
  \ifdim\wd0<\minw \setbox0=\hbox to\minw{\hfil\unhbox0\hfil}\fi
  \box0}

\def\nodestrut{\vphantom(}

\def\C#1{\hbox{\tensc \@cap#1\@cap\/}}
\def\@cap#1#2\@cap{#1\lowercase{#2}}
\def\S{\hbox\bgroup\catcode`\_=12 \tt\S@}
\def\S@#1{#1\egroup}

\def\inst#1{{\ninett\space #1\space}}
\def\reg#1{{\eighttt\space #1\space}}

\catcode`@=12
